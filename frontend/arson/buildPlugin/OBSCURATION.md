# Obscuration.js

Obscuration.js is a script that obfuscates your Javascript files. Since Uglify.js does a good job with local variables, Obscuration.js concentrates on:

## What Gets Obscured

### Functions

* function names of type: `a = function()`
* function names of type: `function b()`

### GC and related variables

* The _GC_ variable
* mvc variables (symbols preceded by `".NAME ="`)

## Enabling Obfuscation

By default, no obfuscation will happen. Once you enable it, it will happen during the build.

To enable obfuscation...
* add a folder named `obsuration` to the envs folder of your project.
* add a file named `obscuration` to that folder.

See the template folder for an example.

## Debug Build Considerations

In order to obfuscate a debug build, source maps need to be turned off. Make this change in `webpack.config.js` (comment out the cheap-eval-source-map):

```
    // We want nice source maps for dev, but will disable later on.
    devtool: '', //'cheap-eval-source-map',
```

## Blacklist vs Whitelist

In blacklist mode `(type=blacklist)`, obscuration will scan the code looking for things to replace. These will be output to a file called `obscuration_mapping_log.csv`.

In whitelist mode `(type=whitelist)`, obscuration will use a file `envs/obscuration/obscuration_whitelist.csv` to determine the mapping. Tis can be a copy of the `obscuration_mapping_log.csv` file generated by the blacklist.

## If Something Goes Wrong

If the game doesn't work correctly, disable obfuscation (by renaming the `obscuration` file, or setting `mvcMangle` and `functionMangle` to `false`, rebuild, and contact the coretech team. There may be a new identifier name that is causing trouble.